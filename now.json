{
    "version": 2,
    "name": "event-app",
    "env": {
        "APP_URL": "@app_url",
        "VKONTAKTE_APP_ID": "@vkontakte_app_id",
        "DATABASE_NAME": "@database_name",
        "DATABASE_USERNAME": "@database_username",
        "DATABASE_PASSWORD": "@database_password",
        "DATABASE_DIALECT": "@database_dialect",
        "DATABASE_HOST": "@database_host",
        "DATABASE_PORT": "@database_port",
        "VKONTAKTE_APP_SECRET": "@vkontakte_app_secret",
        "KEY": "@key"
    },
    "builds": [
        {
            "src": "package.json",
            "use": "@now/static-build",
            "config": {
                "distDir": "dist"
            }
        },
        {
            "src": "backend/index.js",
            "use": "@now/node-server",
            "config": {
                "includeFiles": [
                    "models/**",
                    "../config/**"
                ]
            }
        }
    ],
    "routes": [
        {
            "src": "/api/users/.*",
            "dest": "/backend/index.js",
            "methods": [
                "GET"
            ]
        },
        {
            "src": "/auth/vkontakte(/callback|)",
            "dest": "/backend/index.js",
            "methods": [
                "GET"
            ]
        }
    ]
}
